desc: Example of calling the GitHub API
runners:
  req: https://api.github.com
vars:
  username: ${USER:-blck-snwmn}
steps:
- desc: Get the repositories of the user blck-snwmn
  req:
    /users/{{ vars.username }}/repos:
      get:
        body: null
  test: |
    current.res.status == 200
      && len(current.res.body) > 1
- desc: Get the first repository of the user blck-snwmn
  req:
    /repos/{{ vars.username }}/{{ steps[0].res.body[0].name }}:
      get:
        body: null
  test: |
    current.res.status == 200
      && steps[1].res.body.id == steps[0].res.body[0].id
- desc: Get the first repository of the user blck-snwmn
  req:
    /repos/{{ vars.username }}/{{ steps[0].res.body[1].name }}:
      get:
        body: null
  test: |
    current.res.status == 200
      && steps[2].res.body.full_name == steps[0].res.body[1].full_name